{% extends 'layout.html' %}
{% load static %}

{% block title %}Blog | Entry page{% endblock %}

{% block content %}

<div class="s-content content">
    <main class="row content__page">
        
        <article class="column large-full entry format-standard">

            <div class="media-wrap entry__media">
                <div class="entry__post-thumb">
                    <img src="{{ entry.image.url }}" alt="article_image">
                </div>
            </div>

            <div class="content__page-header entry__header">

                <h1 class="display-1 entry__title">
                    {{ entry.header }}
                </h1>

                <ul class="entry__header-meta">
                    <li class="author">By {{ entry.author_name }},</li>
                    <li class="date">{{ entry.pub_date|date:'F j, Y' }}</li>
                    <li class="cat-links">
                        <a href="{% url 'base:cat-list' entry.category_alias %}">
                            {{ entry.category_name }}
                        </a>
                    </li>
                </ul>

            </div>

            <div class="entry__content">

                {{ entry.text }}

                <p class="entry__tags">
                    <span>Post Tags</span>

                    <span class="entry__tag-list">
                        {% for tag in entry.tags_list %}
                        <a href="{% url 'base:tag-list' tag.alias %}">{{ tag.name }}</a>
                        {% endfor %}
                    </span>
    
                </p>
            </div>


            <div class="entry__pagenav">
                <div class="entry__nav">

                    {% if entry.prev_entry %}
                    <div class="entry__prev">
                        <a href="{% url 'base:entry-page' entry.prev_entry.entry_type entry.prev_entry.id %}" rel="prev">
                            <span>Previous Post</span>
                            {{ entry.prev_entry.header }}
                        </a>
                    </div>
                    {% endif %}

                    {% if entry.next_entry %}
                    <div class="entry__next">
                        <a href="{% url 'base:entry-page' entry.next_entry.entry_type entry.next_entry.id %}" rel="next">
                            <span>Next Post</span>
                            {{ entry.next_entry.header }}
                        </a>
                    </div>
                    {% endif %}

                </div>
            </div>


            <div class="entry__related">
                <h3 class="h2">Related Articles</h3>

                <ul class="related">
                    {% for rel_entry in entry.related_entries %}
                    <li class="related__item">
                        <a href="{% url 'base:entry-page' rel_entry.entry_type rel_entry.id %}" class="related__link">
                            <img src="{{ rel_entry.image_thumb.url }}" alt="">
                        </a>
                        <h5 class="related__post-title">{{ rel_entry.header }}</h5>
                    </li>
                    {% endfor %}
                </ul>
            </div>

        </article>


        <div class="comments-wrap">

            <div id="comments" class="column large-12">

                <h3 class="h2">5 Comments</h3>

                <ol class="commentlist">

                    {% for comment in entry.comments_list %}
                    {% if not comment.parent %}
                    <li class="thread-alt depth-1 comment">

                        <div class="comment__avatar">
                            <img class="avatar" src="{{ comment.author.avatar.url }}" alt="" width="50" height="50">
                        </div>

                        <div class="comment__content">

                            <div class="comment__info">
                                <div class="comment__author">{{ comment.author_name }}</div>

                                <div class="comment__meta">
                                    <div class="comment__time">{{ comment.pub_date|date:'F j, Y' }}</div>
                                    <div class="comment__reply">
                                        <a class="comment-reply-link" href="">Reply</a>
                                    </div>
                                </div>
                            </div>

                            <div class="comment__text">
                                {{ comment.text }}
                            </div>

                        </div>

                        {% if comment.child_count > 0 %}
                        {% for reply in comment.children %}
                        <ul class="children">

                            <li class="depth-2 comment">

                                <div class="comment__avatar">
                                    <img class="avatar" src="{{ reply.author.avatar.url }}" alt="" width="50" height="50">
                                </div>

                                <div class="comment__content">

                                    <div class="comment__info">
                                        <div class="comment__author">{{reply.author.user.first_name}} {{reply.author.user.last_name}}</div>

                                        <div class="comment__meta">
                                            <div class="comment__time">{{ reply.pub_date|date:'F j, Y' }}</div>
                                        </div>
                                    </div>

                                    <div class="comment__text">
                                        {{ reply.text }}
                                    </div>

                                </div>

                            </li>

                        </ul>
                        {% endfor %}
                        {% endif %}

                    </li>
                    {% endif %}
                    {% endfor %}

                </ol>

            </div>


            <div class="column large-12 comment-respond">

                <div id="respond">
    
                    <h3 class="h2">Add Comment <span>Your email address will not be published</span></h3>
    
                    <form name="contactForm" id="contactForm" method="post" action="" autocomplete="off">
                        <fieldset>
    
                            <div class="form-field">
                                <input name="cName" id="cName" class="full-width" placeholder="Your Name" value="" type="text">
                            </div>
    
                            <div class="form-field">
                                <input name="cEmail" id="cEmail" class="full-width" placeholder="Your Email" value="" type="text">
                            </div>
    
                            <div class="message form-field">
                                <textarea name="cMessage" id="cMessage" class="full-width" placeholder="Your Message"></textarea>
                            </div>
    
                            <input name="submit" id="submit" class="btn btn--primary btn-wide btn--large full-width" value="Add Comment" type="submit">
    
                        </fieldset>
                    </form>
    
                </div>
    
            </div>
    
        </div>
    </main>

</div>

{% endblock %}